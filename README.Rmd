---
title: "User Analysis on Auspol"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Tools

In this tutorial, we apply two tools for analyzing Twitter users, `BirdSpotter` and `evently`. While `BirdSpotter` captures the social influence and botness of Twitter users, `evently` specifically models the temporal dynamics of online information diffusion. We leverage information provided by the tools to study the users in a dataset relating to Australian politics.
```{r}
library(evently)
library(reticulate)
birdspotter <- import('birdspotter')
```

## Dataset

The `auspol` dataset contains 9534 tweets curated by querying the Twitter steaming API for tweet containing the hashtag `#auspol` (short for Australian politics) during ????. Due to the terms of service of Twitter, we only publish the tweet IDs of these tweets. One can recover the complete dataset in JSONL via a tool named [twarc](https://github.com/DocNow/twarc) by the following bash command
```{bash eval=FALSE}
twarc hydrate auspol-ids.txt > auspol.jsonl
```
We note that 7077 tweets are available on Twitter as of 26/05/2020. 

## Preprocessing tweets

At this step, we seek to extract diffusion cascades from the `auspol` dataset for analyzing user influence and botness. A diffusion cascade consist of an initial tweet posted by a Twitter user and followed then by a sereis of retweets. A function provided by `evently` allows one to obtain cascades from JSON formatted raw tweets. On the other hand, we initialize a `BirdSpotter` instance by feeding the same raw tweet file.
```{r eval=FALSE}
cascades <- parse_raw_tweets_to_cascades('auspol.jsonl', keep_user = T)
bs <- birdspotter$BirdSpotter('auspol.jsonl')
```
There are 3333 cascades in total from the dataset. We then apply functions to model these cascades before conducting analysis
```{r eval=FALSE}
# fit Hawkes processes with power-law kernel functions on the cascades
group_fits <- group_fit_series(cascades, model_type = 'mPL', observation_times = Inf, cores = 15)
# getLabeledUsers() returns a pandas dataframe with the influence and botness labels of users 
labeledUsers <- bs$getLabeledUsers()
```

## User influence analysis

> TODO

## User botness prediction

> TODO